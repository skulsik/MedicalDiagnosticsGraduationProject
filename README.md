# MedicalDiagnostics
# Сайт медецинской диагностики
Проект дипломной работы BF2
По поставленой задаче было выполнено:
 - найден шаблон для сайта на bootstrap, реализовано взаимодействие шаблона и django, выполнена вся необходимая верстка
 - установлен, настроен и запущен проект django
 - сверстаны шаблоны для отображения контента
 - реализовано отображение и стилизация форм
 - созданы приложения аутентификация пользователя, главное приложение (реализован основной контент), приложение блога
 - для приложений реализован механизм (Create Read Update Delete)
 - созданы модели для полного взаимодействия приложений с базой данных (Object Relational Mapping)
 - настроена работы с postgresql

О функционале сайта:
 - Реализация аутентификации: пользователь может зарегистрироваться, выполнить вход на сайт, изменить свой профиль, выйти с профиля.
 - При регистрации создается пользователь, которому автоматически присваивается статус пациента. Модератор или супер-админ может изменить статус пациента на статус врача. Так же при желании пользователь может указать информацию о себе в своем профиле.
 - Приложение users: создание, авторизация, регистрация пользователя
 - Приложение main:
   - Главная страница: выводится разная информация о услугах клиники, выводится пять случайно выбранных врачей, две последние статьи блога и пять случайных отзыва пациентов.
   - Для пациента: пациент может записаться на прием к врачу, пациент может посмотреть расписание приема врачей на текущий месяц (в расписании указано время которое занято), пациент может посмотреть свои записи на прием; так же пациент может оставить, удалить или просмотреть свои отзывы.
   - Врач на сайте имеет такие же права, как и пациент, за исключением своего расписания приема пациентов. Пациент не имеет доступа к расписанию врача, а врач не может оставить отзыв о клинике.
 - Приложение blog: врач и пациент имеют возможность создавать, редактировать, удалять свои статьи; все пользователи сайта могут просматривать любые статьи.

Запуск проекта:
 - Необходимо клонировать проект по ссылке https://github.com/skulsik/MedicalDiagnostics.git
 - В корне проекта необходимо создать виртуальное окружение (папка env)
 - Зайти в виртуальное окружение, ввести в консоли: env/Script/activate 
 - Установить библиотеки из файла requirements.txt
 - Создать фаил .env и прописать в него свои настройки, по шаблону файла .env.sample
 - Создать миграции командой: python manage.py makemigrations
 - Применить миграции командой: python manage.py migrate
 - Выполнить команду: python manage.py loaddata db.json
 - Запустить сервер с проектом: python manage.py runserver
 - Наслаждаться заполнением контента и тестами сайта

Описание сущностей проекта:
 - Модель user:
   - переопределена авторизация по email
   - добавлены поля: avatar, phone, country, email_verify - верификация по почте, role_status - статус пользователя: пациент или врач
 - Модель blog:
   - поля:
     - name - название блога
     - slug - уникальная строка идентификатор, генерируется автоматически
     - content - текст публикации
     - image - изображение
     - date_time - дата создания публикации, генерируется автоматически
     - publication - признак публикации, по умолчанию False
     - owner - владелец, ссылка на таблицу пользователя в бд, присваивание автоматическое по авторизованному пользователю
     - number_of_views - количество просмотров, по умолчанию 0, авто инкремент в представлении blog.views
   - метод delete: переопределение метода, объект не удаляет, присваивает publication=false
   - метод save: берет name и генерирует из него уникальный идентификатор, если тот не существует, после сохраняет в поле slug
 - Модель Department(Отделение клиники): поле name - название отделения
 - Модель Post(Должность врача в конкретном отделении клиники):
   - name: название должности
   - department: ссылка на таблицу отделения(department) в бд
 - Модель Doctor(Расширение модели пользователя по ветке врача):
   - post: ссылка на таблицу должности(post) в бд
   - education: образование врача
   - awards: награды врача
   - experience: стаж врача
   - owner: владелец, ссылка на таблицу пользователя в бд, присваивание администратором после регистрации врача
   - status_appointment: дает возможность записаться к врачу на прием(имеются врачи, которые не ведут прием: руководители, в отпусках)
 - Модель Patient(Расширение модели пользователя по ветке пациента, для врача):
   - birthday: день рождения пациента (для установления возраста)
   - address: адрес пациента
   - blood_type: группа крови
   - gender: пол пациента
   - place_of_work: место работы
   - hobbies: увлечения
   - discount_status: скидка пациента клиники
   - owner: владелец, ссылка на таблицу пользователя в бд, присваивание автоматическое по авторизованному пользователю
 - Модель Time(Время приема, для создания удобного графика): поле time - время приема, записи на прием
 - Модель Appointment(Запись на прием, взаимодействие врача и пациента):
   - date: дата приема
   - time: время приема, ссылка на таблицу time в бд
   - doctor: врач, ссылка на таблицу doctor в бд
   - status: статус записи - активная, отменена, завершена
   - owner: владелец записи, ссылка на таблицу пользователя в бд, присваивание автоматическое по авторизованному пользователю
 - Модель Feedback(Отзыв пациента):
   - text: текст отзыва
   - date_time: дата и время создания отзыва, присваивается автоматически
   - is_active: для отключения плохих отзывов
   - owner: владелец записи, ссылка на таблицу пользователя в бд, присваивание автоматическое по авторизованному пользователю

Описание методов библиотеки utils:
 - generation_password: генерация пароля из символов таблицы ascii, количество символо 20, возвращает строку
 - unique_slugify: генерирует уникальный индификатор, принимает строку, модифицирует ее к виду slug, возвращает модифицированную уникальную строку
 - parser_register_update_form: принимает form.as_p отлавливает нужные html теги, стилизует и пишет их в список, возвращает строку с html кодом
 - calendar_line_to_list: генерирует календарь, приводит к нужному виду для отображения, возвращает: список дней на данный месяц, год(сейчас), месяц в строковом обазначении, день(сейчас), месяц
